language: node_js
node_js: 'v6'
notifications:
os:
  - osx
  - linux
env:
  - BROWSER=Firefox
  - BROWSER=Safari

matrix:
  include:
  - os: osx
    env: BROWSER=Safari
    sudo: required
  - os: linux
    env: BROWSER=Firefox
    sudo: false

script: rvfb-run npm test -- --browsers $BROWSER

deploy:
  provider: npm
  email: irfs@bbc.co.uk
  skip_cleanup: true
  api_key:
    secure: vO22dsZgTJNx8LIldkPkFFu8jkuBd3XFYfb4HFfhElcBewIkRd7774vsOzkAlT2SshdP2QFTR6Jg7gjiJs2Z6jJYzREvVz3gi06wvoFjKafB93q6bxsEqMel9JmVMfgq2ZDg7SYVAQW+mz+mmk0pa6Ye/oiBztzhatOumDEZwrk=
  on:
    tags: true
    repo: bbc/waveform-data.js
